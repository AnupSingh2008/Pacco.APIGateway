name: Deliveries
path: /deliveries

routes:
- upstream: /{orderId}
  method: GET
  use: downstream
  downstream: deliveries-service/deliveries/{orderId}
  auth: true

- upstream: /
  method: POST
  use: downstream
  downstream: deliveries-service/deliveries
  auth: true
  resource_id:
    property: deliveryId
    generate: true

- upstream: /{deliveryId}/fail
  method: POST
  use: downstream
  downstream: deliveries-service/deliveries/{deliveryId}/fail
  auth: true
  bind:
    - deliveryId:{deliveryId}

- upstream: /{deliveryId}/complete
  method: POST
  use: downstream
  downstream: deliveries-service/deliveries/{deliveryId}/complete
  auth: true
  bind:
    - deliveryId:{deliveryId}

- upstream: /{deliveryId}/registrations
  method: POST
  use: downstream
  downstream: deliveries-service/deliveries/{deliveryId}/registrations
  auth: true
  bind:
    - deliveryId:{deliveryId}
  
services:
  deliveries-service:
    local_url: localhost:5003
    url: deliveries-service
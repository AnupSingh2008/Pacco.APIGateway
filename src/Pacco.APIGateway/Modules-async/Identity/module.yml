name: Identity
path: /identity

routes:
  - upstream: /users/{id}
    method: GET
    use: downstream
    downstream: identity-service/users/{id}
    auth: true
    claims:
      role: admin

  - upstream: /me
    method: GET
    use: downstream
    downstream: identity-service/me
    auth: true

  - upstream: /sign-up
    method: POST
    auth: false
    use: dispatcher
    exchange: identity
    routing_key: identity.sign_up

  - upstream: /sign-in
    method: POST
    auth: false
    use: downstream
    downstream: identity-service/sign-in
    response_headers:
      content-type: application/json

services:
  identity-service:
    url: localhost:5004
#    url: localhost:9999/identity-service